{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/script/components/AudiencesControl.js","webpack:///./src/script/components/Buttons.js","webpack:///./src/script/components/EMailAddressesControl.js","webpack:///./src/script/components/Plugin.js","webpack:///./src/script/components/PreviewUrl.js","webpack:///./src/script/components/SegmentsControl.js","webpack:///./src/script/components/Steps.js","webpack:///./src/script/data/store.js","webpack:///./src/script/gutenberg.js","webpack:///./src/script/hooks/use-config.js","webpack:///./src/script/hooks/use-post.js","webpack:///./src/script/hooks/use-store.js","webpack:///./src/script/utils/email.js","webpack:///external {\"this\":\"regeneratorRuntime\"}","webpack:///external {\"this\":[\"wp\",\"apiFetch\"]}","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"data\"]}","webpack:///external {\"this\":[\"wp\",\"editPost\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"plugins\"]}"],"names":["AudiencesControl","useAudience","state","setState","audiences","useAudiencesLists","useEffect","length","id","listId","name","options","value","label","map","CreateButton","isRequesting","useIsRequesting","audience","useSegment","segment","useRecentCampaign","campaign","_","addCampaign","handleCreateCampaign","audience_id","segment_id","disabled","UpdateButton","updateCampaign","hasChange","useRecentCampaignHasChanges","DeleteButton","_1","_2","deleteCampaign","SendTestButton","hasChanges","useTestEmailAddresses","emails","sendTest","useSendTestEmails","validEmails","filter","validateEmail","SendButton","console","log","EMailAddressesControl","setEmails","handleChange","values","v","e","status","Plugin","PreviewUrl","plaintext","children","htmlUrl","useHTMLPreviewUrl","plaintextUrl","usePlaintextPreviewUrl","SegmentsControl","segments","useSegments","_segments","type","_tags","width","target","Step1","Step2","Step3","testEmailAddressesCache","localStorage","getItem","DEFAULT_STATE","campaigns","testEmailAddresses","JSON","parse","CAMPAIGN_FETCH","post_id","path","CAMPAIGNS_FETCH","CAMPAIGN_ADD","data","CAMPAIGN_UPDATE","CAMPAIGN_DELETE","CAMPAIGN_TEST","email_addresses","CAMPAIGN_SEND","campaign_id","actionNone","actionIsRequesting","actionSetRecentCampaign","actions","setIsRequesting","setAudience","setSegment","setCampaigns","setRecentCampaign","setTestEmailAddresses","result","success","undefined","fetchCampaigns","fetchRecentCampaign","sendTestMail","emailAddresses","STORE_NAME","registerStore","reducer","action","setItem","c","recentCampaign","stringify","selectors","getAudience","getSegment","getCampaigns","getRecentCampaign","getTestEmailAddresses","resolvers","controls","debug","apiFetch","method","PLUGIN_NAME","registerPlugin","render","PostToMailchimp","lists","preview","html","usePost","useSelect","select","getCurrentPost","dispatch","useDispatch","audienceListId","find","s","timeout","setTimeout","clearTimeout","new_campaign","error","Post","parseInt","useCampaigns","_emails","useValidTestEmailAddresses","mail","test"],"mappings":"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","file":"post-to-mailchimp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script/gutenberg.js\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","import {SelectControl, TextControl} from \"@wordpress/components\";\nimport {useEffect} from '@wordpress/element'\nimport {useAudiencesLists} from \"../hooks/use-config\";\nimport {useAudience} from \"../hooks/use-store\";\n\nconst AudiencesControl = ()=> {\n\n    const [state, setState] = useAudience()\n    const audiences = useAudiencesLists()\n\n    useEffect(()=>{\n        if(audiences.length === 1){\n            const id = audiences[0].listId;\n            if(state != id) setState(id);\n        }\n    }, [audiences.length])\n\n    if(audiences.length === 1){\n        return <TextControl \n            label=\"Audience\"\n            value={audiences[0].name}\n            readOnly\n        />\n    }\n\n    const options = [\n        {value:\"\", label: '- Choose audience -'},\n        ...(audiences.map(({listId, name})=>({value: listId, label: name})))\n    ]\n\n    return <SelectControl\n        label=\"Audience\"\n        value={state}\n        onChange={setState}\n        options={options}\n    />\n}\n\nexport default AudiencesControl;","import { Button } from \"@wordpress/components\";\nimport { useAudience, useIsRequesting, useRecentCampaign, useRecentCampaignHasChanges, useSegment, useSendTestEmails, useTestEmailAddresses } from \"../hooks/use-store\";\nimport { validateEmail } from \"../utils/email\";\n\nexport const CreateButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [audience] = useAudience();\n    const [segment] = useSegment();\n\n    const [campaign, _, addCampaign] = useRecentCampaign();\n\n    if(typeof campaign !== typeof undefined){\n        return null;\n    }\n\n    const handleCreateCampaign = ()=> addCampaign({\n        audience_id: audience,\n        segment_id: segment,\n    })\n\n    const disabled = isRequesting;\n\n    return <Button \n        disabled={disabled} \n        isSecondary \n        onClick={handleCreateCampaign}\n    >Create Campaign</Button>\n\n}\n\nexport const UpdateButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [audience] = useAudience();\n    const [segment] = useSegment();\n\n    const [campaign, updateCampaign] = useRecentCampaign();\n    const hasChange = useRecentCampaignHasChanges();\n\n    if(typeof campaign === typeof undefined){\n        return null;\n    }\n\n    const disabled = typeof campaign === typeof undefined || isRequesting || ! hasChange;\n\n    return <Button disabled={disabled} isSecondary onClick={()=>updateCampaign({\n        ...campaign,\n        audience_id: audience,\n        segment_id: segment,\n    })}>Save</Button>\n}\n\nexport const DeleteButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [campaign, _1, _2, deleteCampaign] = useRecentCampaign();\n\n    if(typeof campaign === typeof undefined){\n        return null;\n    }\n\n    const disabled = typeof campaign === typeof undefined || isRequesting;\n\n    return <Button disabled={disabled} isDestructive onClick={()=>deleteCampaign()}>Delete</Button>\n}\n\nexport const SendTestButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const hasChanges = useRecentCampaignHasChanges();\n    const [campaign] = useRecentCampaign();\n    const [emails] = useTestEmailAddresses();\n    const sendTest = useSendTestEmails();\n\n    if(typeof campaign === typeof undefined){\n        return null;\n    }\n\n    const validEmails = emails.filter(validateEmail)\n\n    const disabled = isRequesting || hasChanges || validEmails.length == 0;\n\n    return <Button disabled={disabled} isSecondary onClick={sendTest}>Send test</Button>\n}\n\nexport const SendButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const hasChanges = useRecentCampaignHasChanges();\n    const [campaign] = useRecentCampaign();\n\n    if(typeof campaign === typeof undefined){\n        return null;\n    }\n\n    const disabled = typeof campaign === typeof undefined || isRequesting || hasChanges;\n\n    return <Button disabled={disabled} isPrimary onClick={()=>console.log(\"send\")}>Send!</Button>\n}","import { FormTokenField, PanelRow } from \"@wordpress/components\";\nimport { useTestEmailAddresses } from \"../hooks/use-store\";\nimport { validateEmail } from \"../utils/email\";\n\nconst EMailAddressesControl = ()=>{\n\n    const [emails, setEmails] = useTestEmailAddresses();\n\n    const handleChange = (values)=>{\n        setEmails(values.map(v=>{\n            return typeof v === typeof \"\" ? v : v.value;\n        }))\n    }\n\n    return <PanelRow>\n        <FormTokenField \n            label=\"Email addresses\"\n            value={emails.map(e=>{\n                if(validateEmail(e)){\n                    return e;\n                }\n                return {\n                    value:e, \n                    status: 'error'\n                }\n            })}\n            onChange={handleChange}\n        />\n    </PanelRow>\n}\n\nexport default EMailAddressesControl;","import AudienceControl from \"./AudiencesControl.js\";\nimport SegmentsControl from \"./SegmentsControl.js\";\nimport {Button, PanelBody} from \"@wordpress/components\";\nimport {useAudience, useCampaigns, useIsRequesting, useRecentCampaign, useSegment} from \"../hooks/use-store\";\nimport { useAudiencesLists } from \"../hooks/use-config.js\";\nimport { CreateButton, DeleteButton, SendButton, UpdateButton } from \"./Buttons.js\";\nimport { Step1, Step2, Step3 } from \"./Steps.js\";\n\nconst Plugin = ()=>{\n\n    const audiences = useAudiencesLists();\n\n    if(audiences.length < 1){\n        return <PanelBody>Please make sure there is at least one Mailchimp.com audience available.</PanelBody>\n    }\n\n    return <>\n\n        <Step1 />\n        <Step2 />\n        <Step3 />\n        \n        <PanelBody>\n            <CreateButton />\n            <UpdateButton />\n            <DeleteButton />\n        </PanelBody>\n\n        <PanelBody\n            title=\"History\"\n            initialOpen={false}\n        >\n            <p>Old campaigns</p>\n        </PanelBody>\n        \n    </>\n}\n\nexport default Plugin;","import { Button, PanelRow } from \"@wordpress/components\";\nimport { useHTMLPreviewUrl, usePlaintextPreviewUrl } from \"../hooks/use-config\";\n\nconst PreviewUrl = ({plaintext = false, children })=>{\n    const htmlUrl = useHTMLPreviewUrl();\n    const plaintextUrl = usePlaintextPreviewUrl();\n    return <PanelRow>\n        <Button \n            isSecondary\n            href={plaintext ? plaintextUrl : htmlUrl} \n            target='_blank'\n        >\n            {children}\n        </Button>\n    </PanelRow>\n}\n\nexport default PreviewUrl;","import {BaseControl, SelectControl} from \"@wordpress/components\";\nimport {useSegments} from \"../hooks/use-config\";\nimport {useAudience, useSegment} from \"../hooks/use-store\";\n\nconst SegmentsControl = ()=> {\n\n    const [audience] = useAudience()\n    const segments = useSegments(audience)\n    const [state, setState] = useSegment()\n\n    if(typeof segments !== typeof [] || segments.length === 0){\n        return null;\n    }\n\n    const _segments = segments.filter(({type})=>type !== \"static\");\n    const _tags = segments.filter(({type})=>type === \"static\");\n\n    return <BaseControl\n        id=\"mailchimp-segment\"\n        label=\"Segment or tag\"\n    >\n        <select \n            id=\"mailchimp-segment\" \n            style={{width:'100%'}} \n            value={state}\n            onChange={(e)=> setState(e.target.value)}\n        >\n            <option value=''>-</option>\n            <optgroup label=\"Segments\">\n                {_segments.map(({id, name})=><option key={id} value={id}>{name}</option>)}\n            </optgroup>\n            <optgroup label=\"Tags\">\n                {_tags.map(({id, name})=><option key={id} value={id}>{name}</option>)}\n            </optgroup>\n        </select>\n    </BaseControl>\n}\n\nexport default SegmentsControl;","import { PanelBody } from \"@wordpress/components\"\nimport { useRecentCampaign } from \"../hooks/use-store\"\nimport AudiencesControl from \"./AudiencesControl\"\nimport { SendButton, SendTestButton } from \"./Buttons\"\nimport EMailAddressesControl from \"./EMailAddressesControl\"\nimport PreviewUrl from \"./PreviewUrl\"\nimport SegmentsControl from \"./SegmentsControl\"\n\nexport const Step1 = ()=>{\n\n    return <PanelBody\n        title=\"Step 1: Configure\"\n        initialOpen={true}\n    >\n        <AudiencesControl />\n        <SegmentsControl />\n    </PanelBody>\n}\n\n\nexport const Step2 = ()=>{\n\n    const [campaign] = useRecentCampaign()\n\n    if(!campaign) return null;\n\n    return <PanelBody\n        title=\"Step 2: Test\"\n        \n        initialOpen={false}\n    >\n        <PreviewUrl>HTML Preview</PreviewUrl>\n        <PreviewUrl plaintext>Plaintext Preview</PreviewUrl>\n        <hr />\n        <EMailAddressesControl />\n        <SendTestButton />\n    </PanelBody>\n}\n\nexport const Step3 = ()=>{\n\n    const [campaign] = useRecentCampaign()\n    if(!campaign) return null;\n\n    return <PanelBody\n        title=\"Step 3: Send\"\n        initialOpen={false}\n    >\n        \n        <p>send right now or schedule</p>\n\n        <SendButton />\n    </PanelBody>\n}","import apiFetch from \"@wordpress/api-fetch\";\nimport { registerStore } from \"@wordpress/data\";\nimport { validateEmail } from \"../utils/email\";\n\n// ---------------------------------------------\n// default store state\n// ---------------------------------------------\n// TODO: collect default from settings?\nconst testEmailAddressesCache = localStorage.getItem(\"gutenberg-post-to-mailchimp__test_email_addresses\") || \"[]\"\nconst DEFAULT_STATE = {\n    isRequesting: false,\n    audience: localStorage.getItem(\"gutenberg-post-to-mailchimp__audience\") || \"\",\n    segment: localStorage.getItem(\"gutenberg-post-to-mailchimp__segment\") || \"\",\n    campaigns: [],\n    testEmailAddresses: JSON.parse(testEmailAddressesCache).filter(validateEmail), \n};\n\n// ---------------------------------------------\n// api actions\n// ---------------------------------------------\nconst CAMPAIGN_FETCH = (post_id)=>({\n    type: 'CAMPAIGNS_FETCH',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}?recent=true`,\n});\nconst CAMPAIGNS_FETCH = (post_id)=>({\n    type: 'CAMPAIGNS_FETCH',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}`,\n});\nconst CAMPAIGN_ADD = (campaign)=>({\n    type: 'CAMPAIGN_ADD',\n    path: `/post-to-mailchimp/v1/campaigns/${campaign.post_id}/campaign`,\n    data: campaign\n})\nconst CAMPAIGN_UPDATE = (campaign)=>({\n    type: 'CAMPAIGN_UPDATE',\n    path: `/post-to-mailchimp/v1/campaigns/${campaign.post_id}/campaign`,\n    data: campaign\n})\nconst CAMPAIGN_DELETE = (campaign)=>({\n    type: 'CAMPAIGN_DELETE',\n    path: `/post-to-mailchimp/v1/campaigns/${campaign.post_id}/campaign/${campaign.id}`,\n})\nconst CAMPAIGN_TEST = (campaign, email_addresses)=>({\n    type: 'CAMPAIGN_UPDATE',\n    path: `/post-to-mailchimp/v1/campaigns/${campaign.post_id}/campaign/${campaign.id}/test`,\n    data: {\n        email_addresses: email_addresses,\n    }\n})\nconst CAMPAIGN_SEND = (post_id, campaign_id)=>({\n    type: 'CAMPAIGN_UPDATE',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}/campaign/${campaign_id}/send`,\n    data: {\n        email_addresses: email_addresses,\n    }\n})\n\n// ---------------------------------------------\n// action generators\n// ---------------------------------------------\nconst actionNone = ()=> ({type:'none'})\nconst actionIsRequesting = (isRequesting) => ({type: 'SET_IS_REQUESTING', isRequesting})\nconst actionSetRecentCampaign = (campaign) => ({ type: 'SET_RECENT_CAMPAIGN', campaign })\n\n// ---------------------------------------------\n// public actions that can be used with dispatch\n// ---------------------------------------------\nconst actions = {\n    // ---------------------------------------------\n    // local state\n    // ---------------------------------------------\n    setIsRequesting: actionIsRequesting,\n    setAudience: ( id )=>({ type: 'SET_AUDIENCE', id }),\n    setSegment: ( id ) =>({ type: 'SET_SEGMENT', id }),\n    setCampaigns: ( campaigns ) => ({ type: 'SET_CAMPAIGNS',campaigns }),\n    setRecentCampaign: actionSetRecentCampaign,\n    setTestEmailAddresses: (testEmailAddresses)=>({type: 'SET_TEST_EMAIL_ADDRESSES', testEmailAddresses}),\n\n    // ---------------------------------------------\n    // ajax state\n    // ---------------------------------------------\n    * addCampaign( campaign ){\n        yield actionIsRequesting(true);\n        const result = yield CAMPAIGN_ADD(campaign);\n        yield {\n            type: 'ADD_CAMPAIGN',\n            campaign: result\n        }\n        yield actionSetRecentCampaign(result);\n        return actionIsRequesting(false);\n    },\n    * updateCampaign( campaign ){\n        yield actionIsRequesting(true);\n        const result = yield CAMPAIGN_UPDATE(campaign)\n        yield {\n            type: 'UPDATE_CAMPAIGN',\n            campaign: result\n        }\n        return yield actionIsRequesting(false);\n    },\n    * deleteCampaign( campaign ){\n        yield actionIsRequesting(true);\n        const success = yield CAMPAIGN_DELETE(campaign);\n        if(success) yield actionSetRecentCampaign(undefined);\n        return actionIsRequesting(false);\n    },\n    * fetchCampaigns(post_id){\n        yield actionIsRequesting(true);\n        const campaigns = yield CAMPAIGNS_FETCH(post_id)\n        yield {\n            type: 'SET_CAMPAIGNS',\n            campaigns,\n        }\n        return actionIsRequesting(false);\n    },\n    * fetchRecentCampaign(post_id){\n        yield actionIsRequesting(true);\n        const campaign = yield CAMPAIGN_FETCH(post_id)\n        yield actionSetRecentCampaign(campaign)\n        return actionIsRequesting(true);\n    },\n    * sendTestMail(campaign, emailAddresses){\n        yield actionIsRequesting(true);\n        const result = yield CAMPAIGN_TEST(campaign, emailAddresses)\n        console.log(result);\n        return actionIsRequesting(false);\n    }\n}\n\n// ------------------------------------------------------\n// register our custom store\n// ------------------------------------------------------\nexport const STORE_NAME = 'post-to-mailchimp';\nregisterStore( STORE_NAME, {\n    // ------------------------------------------------------\n    // reduce actions to new state\n    // ------------------------------------------------------\n    reducer( state = DEFAULT_STATE, action  ) {\n        switch ( action.type ) {\n            case 'SET_IS_REQUESTING':\n                return {\n                    ...state,\n                    isRequesting: action.isRequesting,\n                }\n            case 'SET_AUDIENCE':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__audience\",action.id)\n                return {\n                    ...state,\n                    audience: action.id,\n                };\n\n            case 'SET_SEGMENT':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__segment\",action.id)\n                return {\n                    ...state,\n                    segment: action.id,\n                };\n            case 'SET_CAMPAIGNS':\n                return {\n                    ...state,\n                    campaigns: action.campaigns,\n                }\n            case 'ADD_CAMPAIGN':                \n                return {\n                    ...state,\n                    campaigns: [\n                        action.campaign,\n                        ...state.campaigns\n                    ]\n                }\n            case 'UPDATE_CAMPAIGN':                \n                return {\n                    ...state,\n                    campaigns: state.campaigns.map(c=> c.campaign_id === action.campaign.campaign_id ? action.campaign: c)\n                }\n            case 'SET_RECENT_CAMPAIGN':\n                return {\n                    ...state,\n                    recentCampaign: action.campaign\n                }\n            case 'SET_TEST_EMAIL_ADDRESSES':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__test_email_addresses\", JSON.stringify(action.testEmailAddresses))\n                return {\n                    ...state,\n                    testEmailAddresses: action.testEmailAddresses\n                }\n        }\n        return state;\n    },\n    // ------------------------------------------------------\n    // public actions that can be used with dispatch\n    // ------------------------------------------------------\n    actions,\n\n    // ------------------------------------------------------\n    // selectors that can be used with select\n    // ------------------------------------------------------\n    selectors: {\n        isRequesting(state){\n            return state.isRequesting;\n        },\n        getAudience(state){\n            return state.audience;\n        },\n        getSegment(state){\n            return state.segment;\n        },\n        getCampaigns(state, post_id){\n            return state.campaigns;\n        },\n        getRecentCampaign(state, post_id){\n            return state.recentCampaign;\n        },\n        getTestEmailAddresses(state){\n            return state.testEmailAddresses;\n        },\n    },\n     // ----------------------------------------------------------------\n    //  helps resolving the equivalent selector function\n    // ----------------------------------------------------------------\n    resolvers: {\n        * getCampaigns(post_id){\n            if(typeof post_id === typeof undefined) return actionNone();\n            yield actionIsRequesting(true)\n            const campaigns = yield CAMPAIGNS_FETCH(post_id);\n            yield actionIsRequesting(false)\n            return actions.setCampaigns(campaigns);\n        },\n        * getRecentCampaign(post_id){\n            if(typeof post_id === typeof undefined) return actionNone();\n            yield actionIsRequesting(true)\n            const campaign = yield CAMPAIGN_FETCH(post_id);\n            yield actionIsRequesting(false)\n            if(typeof campaign.id !== typeof 1) return actionNone();\n            return actions.setRecentCampaign(campaign)\n        }\n    },\n    // ----------------------------------------------------------------\n    //  controls will be executed as side effects of generator actions\n    // ----------------------------------------------------------------\n    controls: {\n        CAMPAIGN_FETCH(action){\n            console.debug(\"action fetch recent\", action)\n            return apiFetch({path:action.path})\n        },\n        CAMPAIGNS_FETCH(action){\n            console.debug(\"action fetch\", action)\n            return apiFetch({path:action.path});\n        },\n        CAMPAIGN_ADD(action){\n            console.debug(\"action add\", action)\n            return apiFetch({path:action.path, data:action.data, method: \"POST\"})\n        },\n        CAMPAIGN_UPDATE(action){\n            console.debug(\"action update\", action)\n            return apiFetch({path:action.path, data:action.data, method: \"PUT\"})\n        },\n        CAMPAIGN_DELETE(action){\n            console.debug(\"action delete\", action)\n            return apiFetch({path:action.path, method: \"DELETE\"})\n        },\n        CAMPAIGN_TEST(action){\n            console.debug(\"action test\", action);\n            return apiFetch({path:action.path, data:action.data, method: \"POST\"})\n        }\n    },\n})","\"use strict\";\nimport {registerPlugin} from \"@wordpress/plugins\";\nimport { PluginSidebarMoreMenuItem, PluginSidebar } from \"@wordpress/edit-post\";\nimport Plugin from \"./components/Plugin\";\nimport { PanelBody } from \"@wordpress/components\";\n\n(()=>{\n\n    const PLUGIN_NAME = \"post-to-mailchimp\"\n\n    registerPlugin(PLUGIN_NAME, {\n        render: ()=>{\n            return <>\n                <PluginSidebarMoreMenuItem\n                    target={PLUGIN_NAME}\n                    icon=\"email\"\n                >\n                    Post to Mailchimp\n                </PluginSidebarMoreMenuItem>\n                <PluginSidebar\n                    name={PLUGIN_NAME}\n                    icon=\"email\"\n                    title=\"Post to Mailchimp\"\n                >\n                    <Plugin />\n                </PluginSidebar>\n            </>\n        }\n    });\n\n\n})();\n","\nexport const useAudiencesLists = ()=> PostToMailchimp.lists;\nexport const useSegments = (listId) => PostToMailchimp.segments[listId] || []\nexport const useHTMLPreviewUrl = ()=> PostToMailchimp.preview.html;\nexport const usePlaintextPreviewUrl = ()=> PostToMailchimp.preview.plaintext;","import { useSelect } from \"@wordpress/data\"\n\nexport const usePost = ()=> useSelect(select => select('core/editor').getCurrentPost());","import \"../data/store.js\";\nimport {useDispatch, useSelect} from \"@wordpress/data\";\nimport {useEffect} from \"@wordpress/element\";\nimport {useSegments} from \"./use-config\";\nimport { STORE_NAME } from \"../data/store.js\";\nimport { usePost } from \"./use-post.js\";\nimport { validateEmail } from \"../utils/email.js\";\n\nexport const useIsRequesting = ()=>{\n    const state = useSelect(select=>select(STORE_NAME).isRequesting(), []);\n    return state;\n}\n\nexport const useAudience = ()=>{\n    const state = useSelect(select=>select(STORE_NAME).getAudience(), []);\n    const dispatch = useDispatch(STORE_NAME);\n    return [\n        state,\n        (id) =>{\n            dispatch.setAudience(id)\n        }\n    ];\n}\n\nexport const useSegment = ()=>{\n    const [audienceListId] = useAudience();\n    const segments = useSegments(audienceListId);\n    const state = useSelect(select=>select(STORE_NAME).getSegment(), []);\n    const dispatch = useDispatch(STORE_NAME);\n\n    useEffect(()=>{\n        if( segments.find(s=>s.id+\"\" === state+\"\") ) return;\n        const timeout = setTimeout(()=>{\n            dispatch.setSegment(\"\")\n        }, 600)\n        return ()=> clearTimeout(timeout)\n    }, [audienceListId])\n\n    return [\n        state,\n        (id) =>{\n            dispatch.setSegment(id)\n        }\n    ];\n}\n\nexport const useRecentCampaign = () => {\n    const {id} = usePost();\n    const campaign = useSelect(select=>select(STORE_NAME).getRecentCampaign(id));\n    const isRequesting = useIsRequesting();\n    const dispatch = useDispatch(STORE_NAME);\n    return [\n        campaign,\n        (campaign) => {\n            dispatch.updateCampaign(campaign)\n        },\n        (new_campaign) => {\n            if(isRequesting){\n                console.error(\"Wait for running requst to be finished\")\n                return;\n            }\n            if(typeof campaign !== typeof undefined){\n                console.error(\"Can only add new campaign if there is no recent one for this post.\", campaign)\n                return;\n            }\n            dispatch.addCampaign({\n                post_id: id,\n                ...new_campaign,\n            })\n        },\n        ()=>{\n            dispatch.deleteCampaign(campaign);\n        },\n    ];\n}\n\nexport const useRecentCampaignHasChanges = ()=>{\n    const Post = usePost()\n    const [campaign] = useRecentCampaign(Post.id)\n    const [audience] = useAudience();\n    const [segment] = useSegment();\n\n    if(typeof campaign === typeof undefined) return false;\n\n    return typeof campaign !== typeof undefined &&\n        (campaign.audience_id !== audience || campaign.segment_id !== parseInt(segment));\n}\n\nexport const useCampaigns = () => {\n    const {id} = usePost();\n    const campaigns = useSelect(select=>select(STORE_NAME).getCampaigns(id))\n    const dispatch = useDispatch(STORE_NAME)\n    return [\n        campaigns,\n        (campaign) => {\n            dispatch.updateCampaign(campaign)\n        },\n        (campaign) => {\n            dispatch.addCampaign(campaign)\n        }\n    ];\n}\n\nexport const useTestEmailAddresses = ()=>{\n    const emails = useSelect(select => select(STORE_NAME).getTestEmailAddresses())\n    const dispatch = useDispatch(STORE_NAME)\n    return [\n        emails,\n        (_emails)=>{\n            dispatch.setTestEmailAddresses(_emails);\n        }\n    ]\n}\n\nexport const useValidTestEmailAddresses = ()=>{\n    return useSelect(select => select(STORE_NAME).getTestEmailAddresses()).filter(validateEmail)\n}\n\nexport const useSendTestEmails = ()=>{\n    const emails = useValidTestEmailAddresses();\n    const [campaign] = useRecentCampaign();\n    const dispatch = useDispatch(STORE_NAME);\n\n    return ()=>{\n        if(typeof campaign !== typeof undefined && emails.length > 0){\n            dispatch.sendTestMail(campaign, emails)\n        }\n    }\n}","\nexport const validateEmail = (mail) => {\n    return /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail)\n}","(function() { module.exports = this[\"regeneratorRuntime\"]; }());","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","(function() { module.exports = this[\"wp\"][\"editPost\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"plugins\"]; }());"],"sourceRoot":""}