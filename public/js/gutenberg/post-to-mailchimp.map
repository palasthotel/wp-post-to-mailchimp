{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/script/components/AudiencesControl.js","webpack:///./src/script/components/Buttons.js","webpack:///./src/script/components/EMailAddressesControl.js","webpack:///./src/script/components/FinishControl.js","webpack:///./src/script/components/NextStepsInfo.js","webpack:///./src/script/components/Plugin.js","webpack:///./src/script/components/PreviewUrl.js","webpack:///./src/script/components/SegmentsControl.js","webpack:///./src/script/components/Steps.js","webpack:///./src/script/data/store.js","webpack:///./src/script/gutenberg.js","webpack:///./src/script/hooks/use-config.js","webpack:///./src/script/hooks/use-post.js","webpack:///./src/script/hooks/use-store.js","webpack:///./src/script/utils/campaing.js","webpack:///./src/script/utils/email.js","webpack:///external {\"this\":\"regeneratorRuntime\"}","webpack:///external {\"this\":[\"wp\",\"apiFetch\"]}","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"data\"]}","webpack:///external {\"this\":[\"wp\",\"date\"]}","webpack:///external {\"this\":[\"wp\",\"editPost\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"plugins\"]}"],"names":["AudiencesControl","audiences","useAudiencesLists","useRecentCampaign","campaign","setCampaign","audience_id","state","setState","_audience_id","useEffect","length","id","listId","audienceOption","find","a","name","options","value","label","map","DeleteButton","isRequesting","useIsRequesting","isCampaign","delete","SendTestButton","useTestEmailAddresses","emails","sendTest","useSendTestEmails","validEmails","filter","validateEmail","disabled","SendButton","console","log","EMailAddressesControl","setEmails","handleChange","values","v","e","status","Schedule","changeCampaign","defaultNextDate","useDefaultScheduleNextDate","schedule","dateState","Date","getTime","setDate","_date","parse","settings","__experimentalGetSettings","is12HourTime","test","formats","time","toLowerCase","replace","split","reverse","join","FinishControl","segment_id","is_ready","isSchedule","handleScheduleCheckbox","_isSchedule","undefined","handleStartCheckbox","isChecked","style","marginLeft","marginRight","marginBottom","padding","paddingBottom","backgroundColor","schedule_date_string","date","datetime","require","NextStepsInfo","Plugin","PreviewUrl","plaintext","children","htmlUrl","useHTMLPreviewUrl","plaintextUrl","usePlaintextPreviewUrl","SegmentsControl","audience","segments","useSegments","_segment_id","_segments","type","_tags","width","parseInt","target","Step1","Step2","Step3","testEmailAddressesCache","localStorage","getItem","DEFAULT_STATE","campaigns","testEmailAddresses","JSON","CAMPAIGNS_FETCH","post_id","path","CAMPAIGN_TEST","email_addresses","data","CAMPAIGN_SEND","campaign_id","actionNone","actionIsRequesting","actions","setIsRequesting","setCampaigns","setTestEmailAddresses","fetchCampaigns","sendTestMail","emailAddresses","result","sendCampaign","STORE_NAME","registerStore","reducer","action","setItem","stringify","selectors","getCampaigns","getTestEmailAddresses","resolvers","controls","debug","apiFetch","method","PLUGIN_NAME","registerPlugin","render","PostToMailchimp","lists","preview","html","useDefaultScheduleTime","defaultScheduleTime","parts","hours","minutes","getDate","setHours","usePost","useSelect","select","getCurrentPost","getEditedPostAttribute","dispatch","useDispatch","changeSet","editPost","recent_campaign","useAudience","setValue","useSegment","s","timeout","setTimeout","clearTimeout","useCampaigns","_emails","useValidTestEmailAddresses","campaignGetAudienceId","attributes","recipients","list_id","campaignGetSegmentId","segment_opts","saved_segment_id","mail"],"mappings":"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","file":"post-to-mailchimp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script/gutenberg.js\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","import {SelectControl, TextControl} from \"@wordpress/components\";\nimport {useEffect} from '@wordpress/element'\nimport {useAudiencesLists} from \"../hooks/use-config\";\nimport {useRecentCampaign} from \"../hooks/use-store\";\n\nconst AudiencesControl = ()=> {\n\n    const audiences = useAudiencesLists();\n    const [campaign, setCampaign] = useRecentCampaign();\n\n    const {\n        audience_id: state = \"\",\n    } = campaign\n\n    const setState = (_audience_id)=>{\n        setCampaign({audience_id: _audience_id});\n    }\n\n    useEffect(()=>{\n        if(audiences.length === 1){\n            const id = audiences[0].listId;\n            if(state != id) setState(id);\n        }\n    }, [audiences.length, state])\n\n    if(audiences.length === 1){\n        const audienceOption = audiences.find(a=>state === a.listId)\n        return <TextControl \n            label=\"Audience\"\n            value={audienceOption? audienceOption.name:\"\"}\n            readOnly\n        />\n    }\n\n    const options = [\n        {value:\"\", label: '- Choose audience -'},\n        ...(audiences.map(({listId, name})=>({value: listId, label: name})))\n    ]\n\n    return <SelectControl\n        label=\"Audience\"\n        value={state || \"\"}\n        onChange={setState}\n        options={options}\n    />\n}\n\nexport default AudiencesControl;","import { Button } from \"@wordpress/components\";\nimport { useAudience, useIsRequesting, useRecentCampaign, useSegment, useSendTestEmails, useTestEmailAddresses } from \"../hooks/use-store\";\nimport { isCampaign } from \"../utils/campaing\";\nimport { validateEmail } from \"../utils/email\";\n\n\nexport const DeleteButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [campaign, setCampaign] = useRecentCampaign();\n\n    if(!isCampaign(campaign)){\n        return null;\n    }\n\n    return <Button disabled={isRequesting} isDestructive onClick={()=>setCampaign({delete:true})}>Delete</Button>\n}\n\nexport const SendTestButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [campaign] = useRecentCampaign();\n    const [emails] = useTestEmailAddresses();\n    const sendTest = useSendTestEmails();\n\n    if(!isCampaign(campaign)){\n        return null;\n    }\n\n    const validEmails = emails.filter(validateEmail)\n\n    const disabled = isRequesting || validEmails.length == 0;\n\n    return <Button disabled={disabled} isSecondary onClick={sendTest}>Send test</Button>\n}\n\nexport const SendButton = ()=>{\n\n    const isRequesting = useIsRequesting();\n    const [campaign] = useRecentCampaign();\n\n    if(!isCampaign(campaign)){\n        return null;\n    }\n\n    const disabled = typeof campaign === typeof undefined || isRequesting;\n\n    return <Button disabled={disabled} isPrimary onClick={()=>console.log(\"send\")}>Send!</Button>\n}","import { FormTokenField, PanelRow } from \"@wordpress/components\";\nimport { useTestEmailAddresses } from \"../hooks/use-store\";\nimport { validateEmail } from \"../utils/email\";\n\nconst EMailAddressesControl = ()=>{\n\n    const [emails, setEmails] = useTestEmailAddresses();\n\n    const handleChange = (values)=>{\n        setEmails(values.map(v=>{\n            return typeof v === typeof \"\" ? v : v.value;\n        }))\n    }\n\n    return <PanelRow>\n        <FormTokenField \n            label=\"Email addresses\"\n            value={emails.map(e=>{\n                if(validateEmail(e)){\n                    return e;\n                }\n                return {\n                    value:e, \n                    status: 'error'\n                }\n            })}\n            onChange={handleChange}\n        />\n    </PanelRow>\n}\n\nexport default EMailAddressesControl;","import { useEffect } from \"@wordpress/element\";\nimport { CheckboxControl, DateTimePicker, ToggleControl } from \"@wordpress/components\";\nimport { __experimentalGetSettings, date } from '@wordpress/date';\nimport { useRecentCampaign } from \"../hooks/use-store\";\nimport { useDefaultScheduleNextDate } from \"../hooks/use-config\";\n\nconst Schedule = ()=>{\n    const [campaign, changeCampaign] = useRecentCampaign()\n    const defaultNextDate = useDefaultScheduleNextDate();\n\n    const {\n        schedule,\n    } = campaign\n    \n    const dateState = new Date(schedule ? defaultNextDate.getTime() : schedule)\n\n    const setDate = (_date)=>{\n        if(_date){\n            changeCampaign({schedule: Date.parse(_date)})\n        } else {\n            changeCampaign({schedule: (new Date()).getTime()})\n        }\n    }\n\n    const settings = __experimentalGetSettings();\n\n    // To know if the current timezone is a 12 hour time with look for an \"a\" in the time format.\n   // We also make sure this a is not escaped by a \"/\".\n    const is12HourTime = /a(?!\\\\)/i.test(\n        settings.formats.time\n            .toLowerCase() // Test only the lower case a\n            .replace( /\\\\\\\\/g, '' ) // Replace \"//\" with empty strings\n            .split( '' ).reverse().join( '' ) // Reverse the string and test for \"a\" not followed by a slash\n    );\n\n    return <DateTimePicker \n        currentDate={dateState}\n        onChange={setDate}\n        is12Hour={is12HourTime}\n    />\n}\n\nconst FinishControl = ()=>{\n    const [campaign, changeCampaign] = useRecentCampaign()\n\n    const {\n        schedule,\n        audience_id,\n        segment_id,\n        is_ready = false\n    } =  campaign\n\n    const isSchedule = typeof schedule !== typeof undefined && null !== schedule;\n\n    useEffect(()=>{\n        // if something changed uncheck ready checkbox\n        changeCampaign({is_ready: false})\n    }, [audience_id, segment_id, schedule])\n\n    const handleScheduleCheckbox = (_isSchedule) => {\n        if(_isSchedule){\n            changeCampaign({schedule: (new Date()).getTime()})\n        } else {\n            changeCampaign({schedule: undefined})\n        }\n    }\n    const handleStartCheckbox = (isChecked)=>{\n        changeCampaign({\n            is_ready: isChecked\n        })\n    }\n\n    const style = {\n        marginLeft: -16,\n        marginRight: -16,\n        marginBottom: -16,\n        padding: 16,\n        paddingBottom: 8,\n        backgroundColor: is_ready ? \"#AED581\" :\"#ECEFF1\"\n    }\n\n    const settings = __experimentalGetSettings();\n    const schedule_date_string = schedule ? date( settings.formats.datetime ,schedule) :\"\"\n\n    return <>\n        \n            <ToggleControl \n                checked={isSchedule}\n                label=\"Schedule campaign\"\n                onChange={handleScheduleCheckbox}\n            />\n\n            {isSchedule ? <><hr/><Schedule /></> : null}   \n            \n            <div style={style}>\n                <CheckboxControl \n                    checked={is_ready}\n                    label=\"I'm ready to start this campaign\"\n                    onChange={handleStartCheckbox}\n                />\n                {is_ready ? \n                    isSchedule ? \n                        <p>As soon as you save this campaign will be scheduled to be started at {schedule_date_string}.</p> \n                        : \n                        <p>As soon as you save this campaign will be started.</p>\n                    :\n                    null\n                }\n            </div>\n            \n            \n\n    </>\n}\n\nexport default FinishControl;","const { useRecentCampaign } = require(\"../hooks/use-store\");\nconst { isCampaign } = require(\"../utils/campaing\");\n\nconst NextStepsInfo = ()=>{\n\n    const [campaign] = useRecentCampaign();\n\n    if(isCampaign(campaign)) return null;\n\n    return <p>You need to save the post to proceed to next steps.</p>\n}\n\nexport default NextStepsInfo;","import { PanelBody} from \"@wordpress/components\";\nimport { useAudiencesLists } from \"../hooks/use-config.js\";\nimport { CreateButton, DeleteButton } from \"./Buttons.js\";\nimport NextStepsInfo from \"./NextStepsInfo.js\";\nimport { Step1, Step2, Step3 } from \"./Steps.js\";\n\nconst Plugin = ()=>{\n\n    const audiences = useAudiencesLists();\n\n    if(audiences.length < 1){\n        return <PanelBody>Please make sure there is at least one Mailchimp.com audience available.</PanelBody>\n    }\n\n    return <>\n\n        <Step1 />\n        <Step2 />\n        <Step3 />\n        \n        <PanelBody>\n            <NextStepsInfo />\n            <DeleteButton />\n        </PanelBody>\n\n        <PanelBody\n            title=\"History\"\n            initialOpen={false}\n        >\n            <p>TODO: list of all campaigns</p>\n        </PanelBody>\n        \n    </>\n}\n\nexport default Plugin;","import { Button, PanelRow } from \"@wordpress/components\";\nimport { useHTMLPreviewUrl, usePlaintextPreviewUrl } from \"../hooks/use-config\";\n\nconst PreviewUrl = ({plaintext = false, children })=>{\n    const htmlUrl = useHTMLPreviewUrl();\n    const plaintextUrl = usePlaintextPreviewUrl();\n    return <PanelRow>\n        <Button \n            isSecondary\n            href={plaintext ? plaintextUrl : htmlUrl} \n            target='_blank'\n        >\n            {children}\n        </Button>\n    </PanelRow>\n}\n\nexport default PreviewUrl;","import {BaseControl} from \"@wordpress/components\";\nimport {useSegments} from \"../hooks/use-config\";\nimport {useRecentCampaign} from \"../hooks/use-store\";\n\nconst SegmentsControl = ()=> {\n\n    const [campaign = {}, setCampaign ] = useRecentCampaign();\n    const { audience_id:audience = \"\", segment_id:state = \"\" } = campaign;\n    const segments = useSegments(audience);\n\n    const setState = (_segment_id) => {\n        setCampaign({\n            ...campaign,\n            segment_id: _segment_id,\n        })\n    }\n\n    if(typeof segments !== typeof [] || segments.length === 0){\n        return null;\n    }\n\n    const _segments = segments.filter(({type})=>type !== \"static\");\n    const _tags = segments.filter(({type})=>type === \"static\");\n\n    return <BaseControl\n        id=\"mailchimp-segment\"\n        label=\"Segment or tag\"\n    >\n        <select \n            id=\"mailchimp-segment\" \n            style={{width:'100%'}}\n            value={state || \"\"}\n            onChange={(e)=> setState(parseInt(e.target.value))}\n        >\n            <option value=''>-</option>\n            <optgroup label=\"Segments\">\n                {_segments.map(({id, name})=><option key={id} value={id}>{name}</option>)}\n            </optgroup>\n            <optgroup label=\"Tags\">\n                {_tags.map(({id, name})=><option key={id} value={id}>{name}</option>)}\n            </optgroup>\n        </select>\n    </BaseControl>\n}\n\nexport default SegmentsControl;","import { PanelBody } from \"@wordpress/components\"\nimport { useRecentCampaign } from \"../hooks/use-store\"\nimport AudiencesControl from \"./AudiencesControl\"\nimport { SendTestButton } from \"./Buttons\"\nimport EMailAddressesControl from \"./EMailAddressesControl\"\nimport FinishControl from \"./FinishControl\"\nimport PreviewUrl from \"./PreviewUrl\"\nimport SegmentsControl from \"./SegmentsControl\"\n\nexport const Step1 = ()=>{\n\n    return <PanelBody\n        title=\"Step 1: Configure\"\n        initialOpen={true}\n    >\n        <AudiencesControl />\n        <SegmentsControl />\n    </PanelBody>\n}\n\n\nexport const Step2 = ()=>{\n\n    const [campaign] = useRecentCampaign()\n\n    if(!campaign.id) return null;\n\n    return <PanelBody\n        title=\"Step 2: Test\"\n        \n        initialOpen={false}\n    >\n        <PreviewUrl>HTML Preview</PreviewUrl>\n        <PreviewUrl plaintext>Plaintext Preview</PreviewUrl>\n        <hr />\n        <EMailAddressesControl />\n        <SendTestButton />\n    </PanelBody>\n}\n\nexport const Step3 = ()=>{\n\n    const [campaign] = useRecentCampaign()\n    if(!campaign.id) return null;\n\n    return <PanelBody\n        title=\"Step 3: Deliver\"\n        initialOpen={false}\n    >\n        <FinishControl />\n    </PanelBody>\n}","import apiFetch from \"@wordpress/api-fetch\";\nimport { registerStore } from \"@wordpress/data\";\nimport { validateEmail } from \"../utils/email\";\n\n// ---------------------------------------------\n// default store state\n// ---------------------------------------------\n// TODO: collect default from settings?\nconst testEmailAddressesCache = localStorage.getItem(\"gutenberg-post-to-mailchimp__test_email_addresses\") || \"[]\"\nconst DEFAULT_STATE = {\n    isRequesting: false,\n    campaigns: [],\n    testEmailAddresses: JSON.parse(testEmailAddressesCache).filter(validateEmail), \n};\n\n// ---------------------------------------------\n// api actions\n// ---------------------------------------------\nconst CAMPAIGNS_FETCH = (post_id)=>({\n    type: 'CAMPAIGNS_FETCH',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}`,\n});\nconst CAMPAIGN_TEST = (campaign, email_addresses)=>({\n    type: 'CAMPAIGN_TEST',\n    path: `/post-to-mailchimp/v1/campaigns/${campaign.post_id}/campaign/${campaign.id}/test`,\n    data: {\n        email_addresses: email_addresses,\n    }\n});\nconst CAMPAIGN_SEND = (post_id, campaign_id)=>({\n    type: 'CAMPAIGN_UPDATE',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}/campaign/${campaign_id}/send`,\n    data: {\n        email_addresses: email_addresses,\n    }\n});\n\n// ---------------------------------------------\n// action generators\n// ---------------------------------------------\nconst actionNone = ()=> ({type:'none'})\nconst actionIsRequesting = (isRequesting) => ({type: 'SET_IS_REQUESTING', isRequesting})\n\n// ---------------------------------------------\n// public actions that can be used with dispatch\n// ---------------------------------------------\nconst actions = {\n    // ---------------------------------------------\n    // local state\n    // ---------------------------------------------\n    setIsRequesting: actionIsRequesting,\n    setCampaigns: ( campaigns ) => ({ type: 'SET_CAMPAIGNS',campaigns }),\n    setTestEmailAddresses: (testEmailAddresses)=>({type: 'SET_TEST_EMAIL_ADDRESSES', testEmailAddresses}),\n\n    // ---------------------------------------------\n    // ajax state\n    // ---------------------------------------------\n    * fetchCampaigns(post_id){\n        yield actionIsRequesting(true);\n        const campaigns = yield CAMPAIGNS_FETCH(post_id)\n        yield {\n            type: 'SET_CAMPAIGNS',\n            campaigns,\n        }\n        return actionIsRequesting(false);\n    },\n    * sendTestMail(campaign, emailAddresses){\n        yield actionIsRequesting(true);\n        const result = yield CAMPAIGN_TEST(campaign, emailAddresses)\n        return actionIsRequesting(false);\n    },\n    * sendCampaign(campaign){\n        yield actionIsRequesting(true);\n        const result = yield CAMPAIGN_SEND(campaign);\n        return actionIsRequesting(false)\n    },\n}\n\n// ------------------------------------------------------\n// register our custom store\n// ------------------------------------------------------\nexport const STORE_NAME = 'post-to-mailchimp';\nregisterStore( STORE_NAME, {\n    // ------------------------------------------------------\n    // reduce actions to new state\n    // ------------------------------------------------------\n    reducer( state = DEFAULT_STATE, action  ) {\n        switch ( action.type ) {\n            case 'SET_IS_REQUESTING':\n                return {\n                    ...state,\n                    isRequesting: action.isRequesting,\n                }\n            case 'SET_CAMPAIGNS':\n                return {\n                    ...state,\n                    campaigns: action.campaigns,\n                }\n            case 'SET_TEST_EMAIL_ADDRESSES':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__test_email_addresses\", JSON.stringify(action.testEmailAddresses))\n                return {\n                    ...state,\n                    testEmailAddresses: action.testEmailAddresses\n                }\n        }\n        return state;\n    },\n    // ------------------------------------------------------\n    // public actions that can be used with dispatch\n    // ------------------------------------------------------\n    actions,\n\n    // ------------------------------------------------------\n    // selectors that can be used with select\n    // ------------------------------------------------------\n    selectors: {\n        isRequesting(state){\n            return state.isRequesting;\n        },\n        getCampaigns(state, post_id){\n            return state.campaigns;\n        },\n        getTestEmailAddresses(state){\n            return state.testEmailAddresses;\n        },\n    },\n     // ----------------------------------------------------------------\n    //  helps resolving the equivalent selector function\n    // ----------------------------------------------------------------\n    resolvers: {\n        * getCampaigns(post_id){\n            if(typeof post_id === typeof undefined) return actionNone();\n            yield actionIsRequesting(true)\n            const campaigns = yield CAMPAIGNS_FETCH(post_id);\n            yield actionIsRequesting(false)\n            return actions.setCampaigns(campaigns);\n        },\n    },\n    // ----------------------------------------------------------------\n    //  controls will be executed as side effects of generator actions\n    // ----------------------------------------------------------------\n    controls: {\n        CAMPAIGNS_FETCH(action){\n            console.debug(\"action fetch\", action)\n            return apiFetch({path:action.path});\n        },\n        CAMPAIGN_TEST(action){\n            console.debug(\"action test\", action);\n            return apiFetch({path:action.path, data:action.data, method: \"POST\"})\n        },\n        CAMPAIGN_SEND(action){\n            console.debug(\"action send\");\n            return apiFetch({path:action.path, method: \"POST\"})\n        }\n    },\n})","\"use strict\";\nimport {registerPlugin} from \"@wordpress/plugins\";\nimport { PluginSidebarMoreMenuItem, PluginSidebar } from \"@wordpress/edit-post\";\nimport Plugin from \"./components/Plugin\";\n\n(()=>{\n\n    const PLUGIN_NAME = \"post-to-mailchimp\"\n\n    registerPlugin(PLUGIN_NAME, {\n\n        render: ()=>{\n\n            return <>\n                <PluginSidebarMoreMenuItem\n                    target={PLUGIN_NAME}\n                    icon=\"email\"\n                >\n                    Post to Mailchimp\n                </PluginSidebarMoreMenuItem>\n                <PluginSidebar\n                    name={PLUGIN_NAME}\n                    icon=\"email\"\n                    title=\"Post to Mailchimp\"\n                >\n                    <Plugin />\n                </PluginSidebar>\n            </>\n        }\n    });\n\n\n})();\n","\nexport const useAudiencesLists = ()=> PostToMailchimp.lists;\nexport const useSegments = (listId) => PostToMailchimp.segments[listId] || []\nexport const useHTMLPreviewUrl = ()=> PostToMailchimp.preview.html;\nexport const usePlaintextPreviewUrl = ()=> PostToMailchimp.preview.plaintext;\nexport const useDefaultScheduleTime = ()=> PostToMailchimp.defaultScheduleTime;\nexport const useDefaultScheduleNextDate = ()=>{\n    const time = useDefaultScheduleTime();\n    const date = new Date();\n    if(time === \"\") return date;\n    const parts = time.split(\":\");\n    if(parts.length !== 2) return date;\n    const hours = parseInt(parts[0]);\n    const minutes = parseInt(parts[1]);\n    if(hours < 0 || hours > 23 || minutes < 0 || minutes > 60) return date;\n    date.setDate(date.getDate()+1)\n    date.setHours(hours, minutes);\n    return date;\n}","import { useSelect } from \"@wordpress/data\"\n\nexport const usePost = ()=> useSelect(select => select('core/editor').getCurrentPost());","import \"../data/store.js\";\nimport { useDispatch, useSelect } from \"@wordpress/data\";\nimport { useEffect } from \"@wordpress/element\";\nimport { useSegments } from \"./use-config\";\nimport { STORE_NAME } from \"../data/store.js\";\nimport { usePost } from \"./use-post.js\";\nimport { validateEmail } from \"../utils/email.js\";\n\nexport const useIsRequesting = ()=>{\n    const state = useSelect(select=>select(STORE_NAME).isRequesting(), []);\n    return state;\n}\n\nexport const useRecentCampaign = ()=>{\n    const value = useSelect(select => select('core/editor').getEditedPostAttribute(\"recent_campaign\"))\n    const dispatch = useDispatch('core/editor')\n    return [\n        value || {},\n        (changeSet)=>{\n            dispatch.editPost({recent_campaign: {\n                ...value,\n                ...changeSet,\n            }})\n        },\n    ]\n}\n\nexport const useAudience = ()=>{\n    const [campaign, setValue] = useRecentCampaign();\n    return [\n        campaign.audience_id,\n        (id) => setValue({audience_id:id})\n    ];\n}\n\nexport const useSegment = ()=>{\n    const [audience_id] = useAudience();\n    const [campaign, setValue] = useRecentCampaign()\n    const segments = useSegments(audience_id);\n    const state = campaign.segment_id;\n\n    useEffect(()=>{\n        if( segments.find(s=>s.id+\"\" === state+\"\") ) return;\n        const timeout = setTimeout(()=>{\n            setValue({segment_id:\"\"})\n        }, 600)\n        return ()=> clearTimeout(timeout)\n    }, [audience_id])\n\n    return [\n        state,\n        (id) =>setValue({segment_id:id})\n    ];\n}\n\nexport const useCampaigns = () => {\n    const {id} = usePost();\n    const campaigns = useSelect(select=>select(STORE_NAME).getCampaigns(id))\n    const dispatch = useDispatch(STORE_NAME)\n    return [\n        campaigns,\n        () => {\n            dispatch.fetchCampaigns(id)\n        },\n    ];\n}\n\nexport const useTestEmailAddresses = ()=>{\n    const emails = useSelect(select => select(STORE_NAME).getTestEmailAddresses())\n    const dispatch = useDispatch(STORE_NAME)\n    return [\n        emails,\n        (_emails)=>{\n            dispatch.setTestEmailAddresses(_emails);\n        }\n    ]\n}\n\nexport const useValidTestEmailAddresses = ()=>{\n    return useSelect(select => select(STORE_NAME).getTestEmailAddresses()).filter(validateEmail)\n}\n\nexport const useSendTestEmails = ()=>{\n    const emails = useValidTestEmailAddresses();\n    const [campaign] = useRecentCampaign();\n    const dispatch = useDispatch(STORE_NAME);\n\n    return ()=>{\n        if(typeof campaign !== typeof undefined && emails.length > 0){\n            dispatch.sendTestMail(campaign, emails)\n        }\n    }\n}","\nexport const isCampaign = (campaign) => typeof campaign === typeof {} && typeof campaign.id === typeof 1;\n\nexport const campaignGetAudienceId =(attributes)=>{\n    if(\n        typeof attributes !== typeof {}\n        ||\n        typeof attributes.recipients !== typeof {}\n        ||\n        typeof attributes.recipients.list_id !== typeof \"\"\n    ) return undefined;\n    return attributes.recipients.list_id;\n}\n\nexport const campaignGetSegmentId =(attributes)=>{\n    if(\n        typeof attributes !== typeof {}\n        ||\n        typeof attributes.recipients !== typeof {}\n        ||\n        typeof attributes.recipients.segment_opts !== typeof {}\n        ||\n        typeof attributes.recipients.segment_opts.saved_segment_id !== typeof 1\n    ) return undefined;\n    return attributes.recipients.segment_opts.saved_segment_id;\n}","\nexport const validateEmail = (mail) => {\n    return /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/.test(mail)\n}","(function() { module.exports = this[\"regeneratorRuntime\"]; }());","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","(function() { module.exports = this[\"wp\"][\"date\"]; }());","(function() { module.exports = this[\"wp\"][\"editPost\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"plugins\"]; }());"],"sourceRoot":""}