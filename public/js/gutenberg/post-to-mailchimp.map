{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/script/components/AudiencesListControl.js","webpack:///./src/script/components/PluginComponent.js","webpack:///./src/script/components/SegmentsListControl.js","webpack:///./src/script/data/store.js","webpack:///./src/script/gutenberg.js","webpack:///./src/script/hooks/use-config.js","webpack:///./src/script/hooks/use-store.js","webpack:///external {\"this\":\"regeneratorRuntime\"}","webpack:///external {\"this\":[\"wp\",\"apiFetch\"]}","webpack:///external {\"this\":[\"wp\",\"components\"]}","webpack:///external {\"this\":[\"wp\",\"data\"]}","webpack:///external {\"this\":[\"wp\",\"editPost\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"plugins\"]}"],"names":["AudiencesListControl","useAudience","state","setState","audiences","useAudiencesLists","options","value","label","map","listId","name","PluginComponent","Post","useSelect","select","getCurrentPost","console","log","audience","setAudience","useSegment","segment","setSegment","useCampaigns","id","campaigns","updateCampaign","addCampaign","handleCreateCampaign","post_id","audience_id","segment_id","SegmentsListControl","segments","useSegments","length","DEFAULT_STATE","localStorage","getItem","CAMPAIGNS_FETCH","type","path","CAMPAIGN_ADD","campaign","data","CAMPAIGN_UPDATE","actions","setCampaigns","result","reloadCampaigns","STORE_NAME","registerStore","reducer","action","setItem","c","campaign_id","selectors","getAudience","getSegment","getCampaigns","resolvers","controls","apiFetch","method","PLUGIN_NAME","registerPlugin","render","PostToMailchimp","lists","dispatch","useDispatch","audienceListId","useEffect","find","s","timeout","setTimeout","clearTimeout","postId"],"mappings":"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","file":"post-to-mailchimp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/script/gutenberg.js\");\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","import {SelectControl} from \"@wordpress/components\";\nimport {useAudiencesLists} from \"../hooks/use-config\";\nimport {useAudience} from \"../hooks/use-store\";\n\nconst AudiencesListControl = ()=> {\n\n    const [state, setState] = useAudience()\n    const audiences = useAudiencesLists()\n\n    const options = [\n        {value:\"\", label: '- Choose audience -'},\n        ...(audiences.map(({listId, name})=>({value: listId, label: name})))\n    ]\n\n    return <SelectControl\n        label=\"Audience\"\n        value={state}\n        onChange={setState}\n        options={options}\n    />\n}\n\nexport default AudiencesListControl;","import AudiencesListControl from \"./AudiencesListControl\";\nimport SegmentsListControl from \"./SegmentsListControl\";\nimport {Button, PanelBody} from \"@wordpress/components\";\nimport {useAudience, useCampaigns, useSegment} from \"../hooks/use-store\";\nimport { useSelect } from \"@wordpress/data\";\n\nconst PluginComponent = ()=>{\n\n    const Post = useSelect(select => select('core/editor').getCurrentPost())\n\n    console.log(Post)\n\n    const [audience, setAudience] = useAudience()\n    const [segment, setSegment] = useSegment()\n\n    const [campaigns, updateCampaign, addCampaign] = useCampaigns(Post.id)\n\n    console.log(\"campaigns\", campaigns)\n\n    const handleCreateCampaign = ()=>{\n        console.log(\"create campaign with\", audience, segment)\n        addCampaign({\n            post_id: Post.id,\n            audience_id: audience,\n            segment_id: segment\n        })\n    }\n\n    return <PanelBody>\n        <p><a href=\"#preview\">Preview</a></p>\n        <AudiencesListControl />\n        <SegmentsListControl />\n        <Button isSecondary onClick={handleCreateCampaign}>Create Campaign</Button>\n        <p>Send Campaign</p>\n    </PanelBody>\n}\n\nexport default PluginComponent;","import {SelectControl} from \"@wordpress/components\";\nimport {useSegments} from \"../hooks/use-config\";\nimport {useAudience, useSegment} from \"../hooks/use-store\";\n\nconst SegmentsListControl = ()=> {\n\n    const [audience] = useAudience()\n    const segments = useSegments(audience)\n    const [state, setState] = useSegment()\n\n\n    if(typeof segments !== typeof [] || segments.length === 0){\n        return null;\n    }\n\n    const options = [\n        {value:\"\", label: '- Choose segment (optional) -'},\n        ...(segments.map(({id, name})=>({value: id, label: name})))\n    ]\n\n    return <SelectControl\n        label=\"Segments\"\n        value={state}\n        onChange={setState}\n        options={options}\n    />\n}\n\nexport default SegmentsListControl;","import apiFetch from \"@wordpress/api-fetch\";\nimport { registerStore } from \"@wordpress/data\";\n\n// ---------------------------------------------\n// default store state\n// ---------------------------------------------\nconst DEFAULT_STATE = {\n    audience: localStorage.getItem(\"gutenberg-post-to-mailchimp__audience\") || \"\",\n    segment: localStorage.getItem(\"gutenberg-post-to-mailchimp__segment\") || \"\",\n    campaigns: [],\n};\n\n// ---------------------------------------------\n// api actions\n// ---------------------------------------------\nconst CAMPAIGNS_FETCH = (post_id)=>({\n    type: 'CAMPAIGNS_FETCH',\n    path: `/post-to-mailchimp/v1/campaigns/${post_id}`,\n});\nconst CAMPAIGN_ADD = (campaign)=>({\n    type: 'CAMPAIGN_ADD',\n    path: `/post-to-mailchimp/v1/campaigns`,\n    data: campaign\n})\nconst CAMPAIGN_UPDATE = (campaign)=>({\n    type: 'CAMPAIGN_UPDATE',\n    path: `/post-to-mailchimp/v1/campaigns`,\n    data: campaign\n})\n\n// ---------------------------------------------\n// local actions\n// ---------------------------------------------\nconst actions = {\n    setAudience( id ) {\n        return {\n            type: 'SET_AUDIENCE',\n            id,\n        };\n    },\n    setSegment( id ) {\n        return {\n            type: 'SET_SEGMENT',\n            id,\n        };\n    },\n    setCampaigns( campaigns ){\n        return {\n            type: 'SET_CAMPAIGNS',\n            campaigns,\n        }\n    },\n    * addCampaign( campaign ){\n        const result = yield CAMPAIGN_ADD(campaign)\n        console.log(result)\n        return {\n            type: 'ADD_CAMPAIGN',\n            campaign: result\n        }\n\n    },\n    * updateCampaign( campaign ){\n        const result = yield CAMPAIGN_UPDATE(campaign)\n        console.log(result)\n        return {\n            type: 'UPDATE_CAMPAIGN',\n            campaign: result\n        }\n\n    },\n    * reloadCampaigns(post_id){\n        const campaigns = yield CAMPAIGNS_FETCH(post_id)\n        return {\n            type: 'SET_CAMPAIGNS',\n            campaigns,\n        }\n    },\n}\n\n// ------------------------------------------------------\n// register our custom store\n// ------------------------------------------------------\nexport const STORE_NAME = 'post-to-mailchimp';\nregisterStore( STORE_NAME, {\n    // ------------------------------------------------------\n    // reduce actions to new state\n    // ------------------------------------------------------\n    reducer( state = DEFAULT_STATE, action  ) {\n        switch ( action.type ) {\n            case 'SET_AUDIENCE':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__audience\",action.id)\n                return {\n                    ...state,\n                    audience: action.id,\n                };\n\n            case 'SET_SEGMENT':\n                localStorage.setItem(\"gutenberg-post-to-mailchimp__segment\",action.id)\n                return {\n                    ...state,\n                    segment: action.id,\n                };\n            case 'SET_CAMPAIGNS':\n                return {\n                    ...state,\n                    campaigns: action.campaigns,\n                }\n            case 'ADD_CAMPAIGN':                \n                return {\n                    ...state,\n                    campaigns: [\n                        action.campaign,\n                        ...state.campaigns\n                    ]\n                }\n            case 'UPDATE_CAMPAIGN':                \n                return {\n                    ...state,\n                    campaigns: state.campaigns.map(c=> c.campaign_id === action.campaign.campaign_id ? action.campaign: c)\n                }\n        }\n        return state;\n    },\n    // ------------------------------------------------------\n    // public actions that can be used with dispatch\n    // ------------------------------------------------------\n    actions,\n\n    // ------------------------------------------------------\n    // selectors that can be used with select\n    // ------------------------------------------------------\n    selectors: {\n        getAudience(state){\n            return state.audience;\n        },\n        getSegment(state){\n            return state.segment;\n        },\n        getCampaigns(state, post_id){\n            return state.campaigns;\n        },\n    },\n     // ----------------------------------------------------------------\n    //  helps resolving the equivalent selector function\n    // ----------------------------------------------------------------\n    resolvers: {\n        * getCampaigns(post_id){\n            if(typeof post_id === typeof undefined) return {\n                type: \"none\",\n            };\n            const campaigns = yield CAMPAIGNS_FETCH(post_id);\n            return actions.setCampaigns(campaigns);\n        },\n    },\n    // ----------------------------------------------------------------\n    //  controls will be executed as side effects of generator actions\n    // ----------------------------------------------------------------\n    controls: {\n        CAMPAIGNS_FETCH(action){\n            console.log(\"action fetch\", action)\n            return apiFetch({path:action.path});\n        },\n        CAMPAIGN_ADD(action){\n            console.log(\"action add\", action)\n            return apiFetch({path:action.path, data:action.data, method: \"POST\"})\n        },\n        CAMPAIGN_UPDATE(action){\n            console.log(\"action update\", action)\n            return apiFetch({path:action.path, data:action.data, method: \"PUT\"})\n        },\n    },\n})","\"use strict\";\nimport {registerPlugin} from \"@wordpress/plugins\";\nimport { PluginSidebarMoreMenuItem, PluginSidebar } from \"@wordpress/edit-post\";\nimport apiFetch from '@wordpress/api-fetch';\nimport {select} from '@wordpress/data';\nimport PluginComponent from \"./components/PluginComponent\";\n\n(()=>{\n\n    const PLUGIN_NAME = \"post-to-mailchimp\"\n\n    registerPlugin(PLUGIN_NAME, {\n        render: ()=>{\n            return <>\n                <PluginSidebarMoreMenuItem\n                    target={PLUGIN_NAME}\n                    icon=\"email\"\n                >\n                    Post to Mailchimp\n                </PluginSidebarMoreMenuItem>\n                <PluginSidebar\n                    name={PLUGIN_NAME}\n                    icon=\"email\"\n                    title=\"Post to Mailchimp\"\n                >\n                    <PluginComponent />\n                </PluginSidebar>\n            </>\n        }\n    });\n\n\n})();\n","\nexport const useAudiencesLists = ()=> PostToMailchimp.lists;\nexport const useSegments = (listId) => PostToMailchimp.segments[listId] || []","import \"../data/store.js\";\nimport {useDispatch, useSelect} from \"@wordpress/data\";\nimport {useEffect} from \"@wordpress/element\";\nimport {useSegments} from \"./use-config\";\nimport { STORE_NAME } from \"../data/store.js\";\n\n\nexport const useAudience = ()=>{\n    const state = useSelect(select=>select(STORE_NAME).getAudience(), []);\n    const dispatch = useDispatch(STORE_NAME);\n    return [\n        state,\n        (id) =>{\n            dispatch.setAudience(id)\n        }\n    ];\n}\n\nexport const useSegment = ()=>{\n    const [audienceListId] = useAudience();\n    const segments = useSegments(audienceListId);\n    const state = useSelect(select=>select(STORE_NAME).getSegment(), []);\n    const dispatch = useDispatch(STORE_NAME);\n\n    useEffect(()=>{\n        if( segments.find(s=>s.id+\"\" === state+\"\") ) return;\n        const timeout = setTimeout(()=>{\n            dispatch.setSegment(\"\")\n        }, 600)\n        return ()=> clearTimeout(timeout)\n    }, [audienceListId])\n\n    return [\n        state,\n        (id) =>{\n            dispatch.setSegment(id)\n        }\n    ];\n}\n\nexport const useCampaigns = (postId) => {\n    const campaigns = useSelect(select=>select(STORE_NAME).getCampaigns(postId))\n    const dispatch = useDispatch(STORE_NAME)\n    return [\n        campaigns,\n        (campaign) => {\n            console.log(\"update campaign\", campaign)\n            dispatch.updateCampaign(campaign)\n        },\n        (campaign) => {\n            console.log(\"add campaign\", campaign)\n            dispatch.addCampaign(campaign)\n        }\n    ];\n}\n\n","(function() { module.exports = this[\"regeneratorRuntime\"]; }());","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","(function() { module.exports = this[\"wp\"][\"editPost\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"plugins\"]; }());"],"sourceRoot":""}